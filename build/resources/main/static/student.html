<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <title>StudyHub | Student</title>-->
<!--&lt;!&ndash;    <link  rel="stylesheet" href="css/theme.css">&ndash;&gt;-->

<!--    <style>-->
<!--        :root{-->
<!--          &#45;&#45;primary:#A594F9;-->
<!--          &#45;&#45;secondary:#CDC1FF;-->
<!--          &#45;&#45;bg:#F5EFFF;-->
<!--          &#45;&#45;light:#E5D9F2;-->
<!--        }-->

<!--        *{box-sizing:border-box;font-family:Arial,sans-serif}-->

<!--        body{-->
<!--          margin:0;-->
<!--          background:var(&#45;&#45;bg);-->
<!--        }-->

<!--        /* ===== HEADER ===== */-->
<!--        header{-->
<!--          display:flex;-->
<!--          justify-content:space-between;-->
<!--          align-items:center;-->
<!--          padding:18px 40px;-->
<!--          background:#fff;-->
<!--        }-->

<!--        .logo{-->
<!--          font-size:22px;-->
<!--          font-weight:bold;-->
<!--          color:var(&#45;&#45;primary);-->
<!--        }-->

<!--        .nav a{-->
<!--          text-decoration:none;-->
<!--          margin-left:20px;-->
<!--          font-weight:500;-->
<!--          color:#333;-->
<!--        }-->

<!--        .logout-btn{-->
<!--          background:var(&#45;&#45;primary);-->
<!--          color:#fff;-->
<!--          padding:8px 16px;-->
<!--          border-radius:20px;-->
<!--          border:none;-->
<!--          cursor:pointer;-->
<!--        }-->

<!--        /* ===== HERO ===== */-->
<!--        .hero{-->
<!--          text-align:center;-->
<!--          padding:70px 20px 40px;-->
<!--        }-->

<!--        .hero h1{-->
<!--          font-size:40px;-->
<!--          margin-bottom:25px;-->
<!--        }-->

<!--        .search-box{-->
<!--          display:flex;-->
<!--          justify-content:center;-->
<!--          margin-bottom:30px;-->
<!--        }-->

<!--        .search-box input{-->
<!--          width:420px;-->
<!--          padding:14px;-->
<!--          border-radius:25px 0 0 25px;-->
<!--          border:1px solid var(&#45;&#45;light);-->
<!--          outline:none;-->
<!--        }-->

<!--        .search-box button{-->
<!--          padding:14px 22px;-->
<!--          border:none;-->
<!--          border-radius:0 25px 25px 0;-->
<!--          background:var(&#45;&#45;primary);-->
<!--          color:white;-->
<!--          cursor:pointer;-->
<!--        }-->

<!--        /* ===== RESULTS ===== */-->
<!--        .results{-->
<!--          max-width:900px;-->
<!--          margin:0 auto;-->
<!--          padding:20px;-->
<!--        }-->

<!--        .file-card{-->
<!--          background:#fff;-->
<!--          padding:16px 20px;-->
<!--          border-radius:10px;-->
<!--          margin-bottom:12px;-->
<!--          display:flex;-->
<!--          justify-content:space-between;-->
<!--          align-items:center;-->
<!--          box-shadow:0 4px 10px rgba(0,0,0,0.08);-->
<!--        }-->

<!--        .file-card span{-->
<!--          font-weight:500;-->
<!--        }-->

<!--        .file-card a{-->
<!--          text-decoration:none;-->
<!--          background:var(&#45;&#45;primary);-->
<!--          color:#fff;-->
<!--          padding:8px 14px;-->
<!--          border-radius:6px;-->
<!--        }-->

<!--        /* ===== FOOTER ===== */-->
<!--        footer{-->
<!--          text-align:center;-->
<!--          padding:20px;-->
<!--          background:var(&#45;&#45;light);-->
<!--          margin-top:80px;-->
<!--        }-->
<!--        /* ===== AI STUDY ASSISTANT ===== */-->
<!--.ai-section{-->
<!--    margin:80px auto;-->
<!--    max-width:900px;-->
<!--    text-align:center;-->
<!--}-->

<!--.ai-section h2{-->
<!--    font-size:28px;-->
<!--    color:#4b3cc4;-->
<!--}-->

<!--.ai-subtitle{-->
<!--    color:#555;-->
<!--    margin-bottom:25px;-->
<!--}-->

<!--.ai-card{-->
<!--    background:#ffffff;-->
<!--    padding:30px;-->
<!--    border-radius:18px;-->
<!--    box-shadow:0 10px 30px rgba(165,148,249,0.25);-->
<!--}-->

<!--.ai-label{-->
<!--    display:block;-->
<!--    text-align:left;-->
<!--    font-weight:600;-->
<!--    margin-top:15px;-->
<!--}-->

<!--.ai-card input[type="file"],-->
<!--.ai-card textarea{-->
<!--    width:100%;-->
<!--    padding:14px;-->
<!--    margin-top:8px;-->
<!--    border-radius:14px;-->
<!--    border:1px solid #E5D9F2;-->
<!--    outline:none;-->
<!--}-->

<!--.ai-card textarea{-->
<!--    height:120px;-->
<!--    resize:none;-->
<!--}-->

<!--.ai-divider{-->
<!--    margin:20px 0;-->
<!--    font-weight:600;-->
<!--    color:#888;-->
<!--}-->

<!--.ai-actions{-->
<!--    display:flex;-->
<!--    justify-content:center;-->
<!--    gap:15px;-->
<!--    margin-top:20px;-->
<!--}-->

<!--.ai-btn{-->
<!--    padding:12px 26px;-->
<!--    border:none;-->
<!--    border-radius:25px;-->
<!--    background:#A594F9;-->
<!--    color:#fff;-->
<!--    font-size:15px;-->
<!--    cursor:pointer;-->
<!--    transition:all 0.3s ease;-->
<!--}-->

<!--.ai-btn.secondary{-->
<!--    background:#6c63ff;-->
<!--}-->

<!--.ai-btn:hover{-->
<!--    transform:translateY(-2px);-->
<!--    box-shadow:0 8px 20px rgba(165,148,249,0.4);-->
<!--}-->

<!--.ai-output{-->
<!--    margin-top:25px;-->
<!--    padding:20px;-->
<!--    background:#F5EFFF;-->
<!--    border-radius:14px;-->
<!--    min-height:120px;-->
<!--    text-align:left;-->
<!--    color:#333;-->
<!--}-->

<!--    </style>-->
<!--</head>-->

<!--<body>-->

<!--<header>-->
<!--    <div class="logo">üìò StudyHub</div>-->
<!--    <div class="nav">-->
<!--        <form action="/logout" method="post" style="display:inline;">-->
<!--            <button class="logout-btn">Logout</button>-->
<!--        </form>-->
<!--    </div>-->
<!--</header>-->
<!--&lt;!&ndash;<h2>Download PDFs</h2>&ndash;&gt;-->

<!--&lt;!&ndash;<select id="university"><option>JNTU</option></select>&ndash;&gt;-->
<!--&lt;!&ndash;<select id="branch"><option>CSE</option></select>&ndash;&gt;-->
<!--&lt;!&ndash;<select id="semester"><option>SEM 1</option></select>&ndash;&gt;-->
<!--&lt;!&ndash;<input id="subject" placeholder="Subject">&ndash;&gt;-->

<!--<button onclick="load()">Search</button>-->

<!--<div id="list"></div>-->

<!--<section class="hero">-->
<!--    <h1>Search study materials instantly</h1>-->
<!--    <h2>Download PDFs</h2>-->

<!--    <select id="university"><option>JNTU</option></select>-->
<!--    <select id="branch"><option>CSE</option></select>-->
<!--    <select id="semester"><option>SEM 1</option></select>-->
<!--    <input id="subject" placeholder="Subject">-->

<!--&lt;!&ndash;    <button onclick="load()">Search</button>&ndash;&gt;-->
<!--    <div class="search-box">-->
<!--&lt;!&ndash;        <input id="subje" placeholder="Search for any subject, exam or PDF">&ndash;&gt;-->
<!--        <button onclick="searchFiles()">üîç</button>-->
<!--    </div>-->
<!--</section>-->

<!--<section class="results" id="results">-->
<!--    &lt;!&ndash; Search results appear here &ndash;&gt;-->
<!--</section>-->
<!--&lt;!&ndash; ================= AI STUDY ASSISTANT ================= &ndash;&gt;-->
<!--<section class="ai-section">-->
<!--    <h2>ü§ñ AI Study Assistant</h2>-->
<!--    <p class="ai-subtitle">-->
<!--        Upload a PDF or paste text and get simple explanations & summaries-->
<!--    </p>-->

<!--    <div class="ai-card">-->

<!--        &lt;!&ndash; PDF Upload &ndash;&gt;-->
<!--        <label class="ai-label">Upload PDF</label>-->
<!--        <input type="file" id="aiPdf" accept=".pdf">-->

<!--        &lt;!&ndash; OR Divider &ndash;&gt;-->
<!--        <div class="ai-divider">OR</div>-->

<!--        &lt;!&ndash; Text Input &ndash;&gt;-->
<!--        <label class="ai-label">Paste text to summarize</label>-->
<!--        <textarea id="aiText" placeholder="Paste syllabus or notes here..."></textarea>-->

<!--        &lt;!&ndash; Buttons &ndash;&gt;-->
<!--        <div class="ai-actions">-->
<!--            <button onclick="summarizePdf()" class="ai-btn">üìÑ Summarize</button>-->
<!--            <button onclick="simplify()" class="ai-btn secondary">üìò Explain Simply</button>-->
<!--        </div>-->

<!--        &lt;!&ndash; AI Output &ndash;&gt;-->
<!--        <div class="ai-output" id="aiOutput">-->
<!--            AI response will appear here...-->
<!--        </div>-->

<!--    </div>-->
<!--</section>-->


<!--<footer>-->
<!--    ¬© 2025 StudyHub ¬∑ Learn smarter, not harder-->
<!--</footer>-->

<!--<script>-->
<!--    function summarize() {-->

<!--        const pdf = document.getElementById("aiPdf").files[0];-->
<!--        const text = document.getElementById("aiText").value;-->
<!--        const output = document.getElementById("aiOutput");-->

<!--        output.innerText = "‚è≥ Processing...";-->

<!--        // ===== PDF FLOW =====-->
<!--        if (pdf) {-->
<!--            const formData = new FormData();-->
<!--            formData.append("file", pdf);-->

<!--            fetch("/ai/pdf-summary", {-->
<!--                method: "POST",-->
<!--                body: formData-->
<!--            })-->
<!--            .then(res => res.text())-->
<!--            .then(data => output.innerText = data)-->
<!--            .catch(() => output.innerText = "‚ùå Failed to summarize PDF");-->
<!--            return;-->
<!--        }-->

<!--        // ===== TEXT FLOW =====-->
<!--        fetch("/ai/summarize", {-->
<!--            method: "POST",-->
<!--            headers: { "Content-Type": "text/plain" },-->
<!--            body: text-->
<!--        })-->
<!--        .then(res => res.text())-->
<!--        .then(data => output.innerText = data)-->
<!--        .catch(() => output.innerText = "‚ùå Failed to summarize text");-->
<!--    }-->

<!--    function simplify() {-->

<!--        const text = document.getElementById("aiText").value;-->
<!--        const output = document.getElementById("aiOutput");-->

<!--        output.innerText = "‚è≥ Processing...";-->

<!--        fetch("/ai/simplify", {-->
<!--            method: "POST",-->
<!--            headers: { "Content-Type": "text/plain" },-->
<!--            body: text-->
<!--        })-->
<!--        .then(res => res.text())-->
<!--        .then(data => output.innerText = data)-->
<!--        .catch(() => output.innerText = "‚ùå Failed to explain");-->
<!--    }-->
<!--    async function load() {-->
<!--  const u = university.value;-->
<!--  const b = branch.value;-->
<!--  const s = semester.value;-->
<!--  const sub = subject.value;-->

<!--  const res = await fetch(`/files/list?university=${u}&branch=${b}&semester=${s}&subject=${sub}`);-->
<!--  const data = await res.json();-->

<!--  list.innerHTML = "";-->
<!--  data.forEach(f => {-->
<!--    list.innerHTML += `-->
<!--      <div>-->
<!--        ${f.filename}-->
<!--        <a href="/files/download/${f.id}">Download</a>-->
<!--      </div>`;-->
<!--  });-->
<!--}-->
<!--</script>-->





<!--</body>-->
<!--</html>-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>StudyHub | Student</title>

    <style>
        body {
          margin: 0;
          font-family: Arial, sans-serif;
          background: #f6f2ff;
        }

        /* HEADER */
        header {
          background: white;
          padding: 16px 40px;
          display: flex;
          justify-content: space-between;
          align-items: center;
        }

        .logo {
          font-size: 22px;
          font-weight: bold;
          color: #7b6cff;
        }

        .logout {
          background: #7b6cff;
          color: white;
          padding: 8px 16px;
          border-radius: 20px;
          text-decoration: none;
        }

        /* MAIN */
        .container {
          max-width: 900px;
          margin: 40px auto;
          text-align: center;
        }

        h1 {
          margin-bottom: 20px;
        }

        /* FILTERS */
        .filters {
          display: flex;
          gap: 10px;
          justify-content: center;
          margin-bottom: 20px;
        }

        .filters select {
          padding: 8px;
        }

        /* BIG SEARCH BAR */
        .search-box {
          display: flex;
          justify-content: center;
          margin-bottom: 30px;
        }

        .search-box input {
          width: 450px;
          padding: 14px;
          border-radius: 25px 0 0 25px;
          border: 1px solid #ccc;
          outline: none;
        }

        .search-box button {
          padding: 14px 22px;
          border: none;
          border-radius: 0 25px 25px 0;
          background: #7b6cff;
          color: white;
          cursor: pointer;
        }

        /* RESULTS */
        #results {
          margin-top: 20px;
          text-align: left;
        }

        .result-card {
          background: white;
          padding: 14px;
          margin-bottom: 10px;
          border-radius: 10px;
          display: flex;
          justify-content: space-between;
          align-items: center;
        }

        .result-card a {
          text-decoration: none;
          background: #7b6cff;
          color: white;
          padding: 6px 14px;
          border-radius: 16px;
        }
    </style>
</head>

<body>

<header>
    <div class="logo">üìò StudyHub</div>
    <a class="logout" href="/logout">Logout</a>
</header>

<div class="container">

    <h1>Download PDFs</h1>

    <!-- FILTERS -->
    <div class="filters">
        <select id="university">
            <option value="JNTU">JNTU</option>
            <option value="OU">OU</option>
        </select>

        <select id="branch">
            <option value="CSE">CSE</option>
            <option value="ECE">ECE</option>
        </select>

        <select id="semester">
            <option value="SEM 1">SEM 1</option>
            <option value="SEM 2">SEM 2</option>
        </select>
    </div>

    <!-- BIG SEARCH BAR -->
    <div class="search-box">
        <input id="subjectSearch" placeholder="Search subject or PDF name">
        <button onclick="searchFiles()">üîç</button>
    </div>

    <!-- RESULTS -->
    <div id="results"></div>

</div>

<script>
    async function searchFiles() {
      const university = document.getElementById("university").value;
      const branch = document.getElementById("branch").value;
      const semester = document.getElementById("semester").value;
      const subject = document.getElementById("subjectSearch").value;

      const res = await fetch(
        `/files/list?university=${university}&branch=${branch}&semester=${semester}&subject=${subject}`
      );

      const data = await res.json();
      const results = document.getElementById("results");
      results.innerHTML = "";

      if (data.length === 0) {
        results.innerHTML = "<p>No PDFs found</p>";
        return;
      }

      data.forEach(f => {
        results.innerHTML += `
          <div class="result-card">
            <span>${f.filename}</span>
            <a href="/files/download/${f.id}">Download</a>
          </div>
        `;
      });
    }
</script>

</body>
</html>
