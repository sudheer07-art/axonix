<!--&lt;!&ndash;<!DOCTYPE html>&ndash;&gt;-->
<!--&lt;!&ndash;<html lang="en">&ndash;&gt;-->
<!--&lt;!&ndash;<head>&ndash;&gt;-->
<!--&lt;!&ndash;    <meta charset="UTF-8">&ndash;&gt;-->
<!--&lt;!&ndash;    <title>AI PDF Summarizer | StudyHub</title>&ndash;&gt;-->

<!--&lt;!&ndash;    <style>&ndash;&gt;-->
<!--&lt;!&ndash;        /* ================= THEME ================= */&ndash;&gt;-->
<!--&lt;!&ndash;        :root{&ndash;&gt;-->
<!--&lt;!&ndash;          &#45;&#45;bg:#0f0f0f;&ndash;&gt;-->
<!--&lt;!&ndash;          &#45;&#45;card:#1a1a1a;&ndash;&gt;-->
<!--&lt;!&ndash;          &#45;&#45;text:#ffffff;&ndash;&gt;-->
<!--&lt;!&ndash;          &#45;&#45;muted:#b5b5b5;&ndash;&gt;-->
<!--&lt;!&ndash;          &#45;&#45;accent:#ffffff;&ndash;&gt;-->
<!--&lt;!&ndash;        }&ndash;&gt;-->

<!--&lt;!&ndash;        *{&ndash;&gt;-->
<!--&lt;!&ndash;          box-sizing:border-box;&ndash;&gt;-->
<!--&lt;!&ndash;          font-family: Inter, system-ui, sans-serif;&ndash;&gt;-->
<!--&lt;!&ndash;        }&ndash;&gt;-->

<!--&lt;!&ndash;        body{&ndash;&gt;-->
<!--&lt;!&ndash;          margin:0;&ndash;&gt;-->
<!--&lt;!&ndash;          background:var(&#45;&#45;bg);&ndash;&gt;-->
<!--&lt;!&ndash;          color:var(&#45;&#45;text);&ndash;&gt;-->
<!--&lt;!&ndash;          display:flex;&ndash;&gt;-->
<!--&lt;!&ndash;          justify-content:center;&ndash;&gt;-->
<!--&lt;!&ndash;          padding:40px;&ndash;&gt;-->
<!--&lt;!&ndash;        }&ndash;&gt;-->

<!--&lt;!&ndash;        /* ================= CONTAINER ================= */&ndash;&gt;-->
<!--&lt;!&ndash;        .container{&ndash;&gt;-->
<!--&lt;!&ndash;          width:100%;&ndash;&gt;-->
<!--&lt;!&ndash;          max-width:900px;&ndash;&gt;-->
<!--&lt;!&ndash;        }&ndash;&gt;-->

<!--&lt;!&ndash;        /* ================= HEADER ================= */&ndash;&gt;-->
<!--&lt;!&ndash;        .header{&ndash;&gt;-->
<!--&lt;!&ndash;          display:flex;&ndash;&gt;-->
<!--&lt;!&ndash;          justify-content:space-between;&ndash;&gt;-->
<!--&lt;!&ndash;          align-items:center;&ndash;&gt;-->
<!--&lt;!&ndash;          margin-bottom:30px;&ndash;&gt;-->
<!--&lt;!&ndash;        }&ndash;&gt;-->

<!--&lt;!&ndash;        .header h1{&ndash;&gt;-->
<!--&lt;!&ndash;          font-size:28px;&ndash;&gt;-->
<!--&lt;!&ndash;          font-weight:700;&ndash;&gt;-->
<!--&lt;!&ndash;        }&ndash;&gt;-->

<!--&lt;!&ndash;        .logout{&ndash;&gt;-->
<!--&lt;!&ndash;          background:none;&ndash;&gt;-->
<!--&lt;!&ndash;          color:var(&#45;&#45;text);&ndash;&gt;-->
<!--&lt;!&ndash;          border:1px solid #333;&ndash;&gt;-->
<!--&lt;!&ndash;          padding:8px 14px;&ndash;&gt;-->
<!--&lt;!&ndash;          border-radius:10px;&ndash;&gt;-->
<!--&lt;!&ndash;          cursor:pointer;&ndash;&gt;-->
<!--&lt;!&ndash;          transition:.25s;&ndash;&gt;-->
<!--&lt;!&ndash;        }&ndash;&gt;-->

<!--&lt;!&ndash;        .logout:hover{&ndash;&gt;-->
<!--&lt;!&ndash;          background:#fff;&ndash;&gt;-->
<!--&lt;!&ndash;          color:#000;&ndash;&gt;-->
<!--&lt;!&ndash;        }&ndash;&gt;-->

<!--&lt;!&ndash;        /* ================= CARD ================= */&ndash;&gt;-->
<!--&lt;!&ndash;        .card{&ndash;&gt;-->
<!--&lt;!&ndash;          background:var(&#45;&#45;card);&ndash;&gt;-->
<!--&lt;!&ndash;          padding:30px;&ndash;&gt;-->
<!--&lt;!&ndash;          border-radius:18px;&ndash;&gt;-->
<!--&lt;!&ndash;          box-shadow:0 20px 50px rgba(0,0,0,.6);&ndash;&gt;-->
<!--&lt;!&ndash;        }&ndash;&gt;-->

<!--&lt;!&ndash;        /* ================= UPLOAD ================= */&ndash;&gt;-->
<!--&lt;!&ndash;        .upload-box{&ndash;&gt;-->
<!--&lt;!&ndash;          border:2px dashed #333;&ndash;&gt;-->
<!--&lt;!&ndash;          padding:30px;&ndash;&gt;-->
<!--&lt;!&ndash;          border-radius:16px;&ndash;&gt;-->
<!--&lt;!&ndash;          text-align:center;&ndash;&gt;-->
<!--&lt;!&ndash;          cursor:pointer;&ndash;&gt;-->
<!--&lt;!&ndash;          transition:.3s;&ndash;&gt;-->
<!--&lt;!&ndash;        }&ndash;&gt;-->

<!--&lt;!&ndash;        .upload-box:hover{&ndash;&gt;-->
<!--&lt;!&ndash;          border-color:#fff;&ndash;&gt;-->
<!--&lt;!&ndash;        }&ndash;&gt;-->

<!--&lt;!&ndash;        .upload-box input{&ndash;&gt;-->
<!--&lt;!&ndash;          display:none;&ndash;&gt;-->
<!--&lt;!&ndash;        }&ndash;&gt;-->

<!--&lt;!&ndash;        .upload-box h3{&ndash;&gt;-->
<!--&lt;!&ndash;          margin:10px 0;&ndash;&gt;-->
<!--&lt;!&ndash;        }&ndash;&gt;-->

<!--&lt;!&ndash;        /* ================= BUTTON ================= */&ndash;&gt;-->
<!--&lt;!&ndash;        button{&ndash;&gt;-->
<!--&lt;!&ndash;          background:#fff;&ndash;&gt;-->
<!--&lt;!&ndash;          color:#000;&ndash;&gt;-->
<!--&lt;!&ndash;          border:none;&ndash;&gt;-->
<!--&lt;!&ndash;          padding:14px 24px;&ndash;&gt;-->
<!--&lt;!&ndash;          border-radius:14px;&ndash;&gt;-->
<!--&lt;!&ndash;          font-size:15px;&ndash;&gt;-->
<!--&lt;!&ndash;          cursor:pointer;&ndash;&gt;-->
<!--&lt;!&ndash;          margin-top:20px;&ndash;&gt;-->
<!--&lt;!&ndash;          transition:.25s;&ndash;&gt;-->
<!--&lt;!&ndash;        }&ndash;&gt;-->

<!--&lt;!&ndash;        button:hover{&ndash;&gt;-->
<!--&lt;!&ndash;          transform:translateY(-2px);&ndash;&gt;-->
<!--&lt;!&ndash;        }&ndash;&gt;-->

<!--&lt;!&ndash;        /* ================= CHAT OUTPUT ================= */&ndash;&gt;-->
<!--&lt;!&ndash;        .chat{&ndash;&gt;-->
<!--&lt;!&ndash;          margin-top:30px;&ndash;&gt;-->
<!--&lt;!&ndash;        }&ndash;&gt;-->

<!--&lt;!&ndash;        .msg{&ndash;&gt;-->
<!--&lt;!&ndash;          max-width:85%;&ndash;&gt;-->
<!--&lt;!&ndash;          padding:18px 22px;&ndash;&gt;-->
<!--&lt;!&ndash;          border-radius:18px;&ndash;&gt;-->
<!--&lt;!&ndash;          margin-bottom:18px;&ndash;&gt;-->
<!--&lt;!&ndash;          line-height:1.6;&ndash;&gt;-->
<!--&lt;!&ndash;          animation:fadeUp .4s ease;&ndash;&gt;-->
<!--&lt;!&ndash;        }&ndash;&gt;-->
<!--&lt;!&ndash;.hidden { display:none; }&ndash;&gt;-->

<!--&lt;!&ndash;#filePreview{&ndash;&gt;-->
<!--&lt;!&ndash;  display:flex;&ndash;&gt;-->
<!--&lt;!&ndash;  justify-content:space-between;&ndash;&gt;-->
<!--&lt;!&ndash;  align-items:center;&ndash;&gt;-->
<!--&lt;!&ndash;  gap:12px;&ndash;&gt;-->
<!--&lt;!&ndash;}&ndash;&gt;-->

<!--&lt;!&ndash;.remove{&ndash;&gt;-->
<!--&lt;!&ndash;  cursor:pointer;&ndash;&gt;-->
<!--&lt;!&ndash;  font-weight:bold;&ndash;&gt;-->
<!--&lt;!&ndash;  opacity:.7;&ndash;&gt;-->
<!--&lt;!&ndash;  transition:.2s;&ndash;&gt;-->
<!--&lt;!&ndash;}&ndash;&gt;-->

<!--&lt;!&ndash;.remove:hover{&ndash;&gt;-->
<!--&lt;!&ndash;  opacity:1;&ndash;&gt;-->
<!--&lt;!&ndash;  transform:scale(1.2);&ndash;&gt;-->
<!--&lt;!&ndash;}&ndash;&gt;-->

<!--&lt;!&ndash;        .user{&ndash;&gt;-->
<!--&lt;!&ndash;          background:#fff;&ndash;&gt;-->
<!--&lt;!&ndash;          color:#000;&ndash;&gt;-->
<!--&lt;!&ndash;          margin-left:auto;&ndash;&gt;-->
<!--&lt;!&ndash;        }&ndash;&gt;-->

<!--&lt;!&ndash;        .ai{&ndash;&gt;-->
<!--&lt;!&ndash;          background:#222;&ndash;&gt;-->
<!--&lt;!&ndash;          border:1px solid #333;&ndash;&gt;-->
<!--&lt;!&ndash;        }&ndash;&gt;-->

<!--&lt;!&ndash;        /* ================= LOADING ================= */&ndash;&gt;-->
<!--&lt;!&ndash;        .loader{&ndash;&gt;-->
<!--&lt;!&ndash;          width:40px;&ndash;&gt;-->
<!--&lt;!&ndash;          height:40px;&ndash;&gt;-->
<!--&lt;!&ndash;          border:4px solid #333;&ndash;&gt;-->
<!--&lt;!&ndash;          border-top:4px solid #fff;&ndash;&gt;-->
<!--&lt;!&ndash;          border-radius:50%;&ndash;&gt;-->
<!--&lt;!&ndash;          animation:spin 1s linear infinite;&ndash;&gt;-->
<!--&lt;!&ndash;          margin:20px auto;&ndash;&gt;-->
<!--&lt;!&ndash;        }&ndash;&gt;-->

<!--&lt;!&ndash;        /* ================= ANIMATIONS ================= */&ndash;&gt;-->
<!--&lt;!&ndash;        @keyframes spin{&ndash;&gt;-->
<!--&lt;!&ndash;          to{transform:rotate(360deg)}&ndash;&gt;-->
<!--&lt;!&ndash;        }&ndash;&gt;-->

<!--&lt;!&ndash;        @keyframes fadeUp{&ndash;&gt;-->
<!--&lt;!&ndash;          from{opacity:0;transform:translateY(10px)}&ndash;&gt;-->
<!--&lt;!&ndash;          to{opacity:1;transform:translateY(0)}&ndash;&gt;-->
<!--&lt;!&ndash;        }&ndash;&gt;-->
<!--&lt;!&ndash;        .spinner {&ndash;&gt;-->
<!--&lt;!&ndash;  width: 22px;&ndash;&gt;-->
<!--&lt;!&ndash;  height: 22px;&ndash;&gt;-->
<!--&lt;!&ndash;  border: 3px solid #333;&ndash;&gt;-->
<!--&lt;!&ndash;  border-top: 3px solid white;&ndash;&gt;-->
<!--&lt;!&ndash;  border-radius: 50%;&ndash;&gt;-->
<!--&lt;!&ndash;  animation: spin 0.8s linear infinite;&ndash;&gt;-->
<!--&lt;!&ndash;}&ndash;&gt;-->

<!--&lt;!&ndash;@keyframes spin {&ndash;&gt;-->
<!--&lt;!&ndash;  to { transform: rotate(360deg); }&ndash;&gt;-->
<!--&lt;!&ndash;}&ndash;&gt;-->

<!--&lt;!&ndash;    </style>&ndash;&gt;-->
<!--&lt;!&ndash;</head>&ndash;&gt;-->

<!--&lt;!&ndash;<body>&ndash;&gt;-->

<!--&lt;!&ndash;<div class="container">&ndash;&gt;-->

<!--&lt;!&ndash;    <div class="header">&ndash;&gt;-->
<!--&lt;!&ndash;        <h1>ü§ñ AI PDF Summarizer</h1>&ndash;&gt;-->
<!--&lt;!&ndash;        <button class="logout" onclick="logout()">Logout</button>&ndash;&gt;-->
<!--&lt;!&ndash;    </div>&ndash;&gt;-->

<!--&lt;!&ndash;    <div class="card">&ndash;&gt;-->

<!--&lt;!&ndash;        <label class="upload-box">&ndash;&gt;-->
<!--&lt;!&ndash;            <input type="file" id="pdf" accept="application/pdf">&ndash;&gt;-->
<!--&lt;!&ndash;            <h3>Upload PDF</h3>&ndash;&gt;-->
<!--&lt;!&ndash;            <p class="muted">Drop or click to upload</p>&ndash;&gt;-->
<!--&lt;!&ndash;        </label>&ndash;&gt;-->

<!--&lt;!&ndash;        <button onclick="summarize()">Summarize PDF</button>&ndash;&gt;-->

<!--&lt;!&ndash;        <div class="chat" id="chat"></div>&ndash;&gt;-->
<!--&lt;!&ndash;        &lt;!&ndash; Uploaded file preview &ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;        <div id="filePreview" class="msg user hidden">&ndash;&gt;-->
<!--&lt;!&ndash;            <span id="fileName"></span>&ndash;&gt;-->
<!--&lt;!&ndash;            <span class="remove" onclick="removeFile()">‚úï</span>&ndash;&gt;-->
<!--&lt;!&ndash;        </div>&ndash;&gt;-->

<!--&lt;!&ndash;        &lt;!&ndash; Spinner &ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;        <div id="loader" class="loader" style="display:none;"></div>&ndash;&gt;-->

<!--&lt;!&ndash;    </div>&ndash;&gt;-->
<!--&lt;!&ndash;</div>&ndash;&gt;-->

<!--&lt;!&ndash;<script>&ndash;&gt;-->
<!--&lt;!&ndash;    /* ================= AUTH ================= */&ndash;&gt;-->
<!--&lt;!&ndash;    fetch("/auth/status")&ndash;&gt;-->
<!--&lt;!&ndash;      .then(r=>r.json())&ndash;&gt;-->
<!--&lt;!&ndash;      .then(d=>{&ndash;&gt;-->
<!--&lt;!&ndash;        if(!d.role || d.role==="NOT_LOGGED_IN"){&ndash;&gt;-->
<!--&lt;!&ndash;          alert("Login required");&ndash;&gt;-->
<!--&lt;!&ndash;          location.href="/register.html";&ndash;&gt;-->
<!--&lt;!&ndash;        }&ndash;&gt;-->
<!--&lt;!&ndash;      });&ndash;&gt;-->

<!--&lt;!&ndash;    /* ================= ELEMENTS ================= */&ndash;&gt;-->
<!--&lt;!&ndash;    const pdfInput = document.getElementById("pdf");&ndash;&gt;-->
<!--&lt;!&ndash;    const filePreview = document.getElementById("filePreview");&ndash;&gt;-->
<!--&lt;!&ndash;    const fileNameSpan = document.getElementById("fileName");&ndash;&gt;-->
<!--&lt;!&ndash;    const chat = document.getElementById("chat");&ndash;&gt;-->
<!--&lt;!&ndash;    const loader = document.getElementById("loader");&ndash;&gt;-->

<!--&lt;!&ndash;    /* ================= FILE PREVIEW ================= */&ndash;&gt;-->
<!--&lt;!&ndash;    pdfInput.addEventListener("change", () => {&ndash;&gt;-->
<!--&lt;!&ndash;      if (pdfInput.files.length > 0) {&ndash;&gt;-->
<!--&lt;!&ndash;        fileNameSpan.innerText = pdfInput.files[0].name;&ndash;&gt;-->
<!--&lt;!&ndash;        filePreview.classList.remove("hidden");&ndash;&gt;-->
<!--&lt;!&ndash;      }&ndash;&gt;-->
<!--&lt;!&ndash;    });&ndash;&gt;-->

<!--&lt;!&ndash;    function removeFile(){&ndash;&gt;-->
<!--&lt;!&ndash;      pdfInput.value = "";&ndash;&gt;-->
<!--&lt;!&ndash;      filePreview.classList.add("hidden");&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->

<!--&lt;!&ndash;    /* ================= CHAT HELPERS ================= */&ndash;&gt;-->
<!--&lt;!&ndash;    function addUserMessage(text){&ndash;&gt;-->
<!--&lt;!&ndash;      const div=document.createElement("div");&ndash;&gt;-->
<!--&lt;!&ndash;      div.className="msg user";&ndash;&gt;-->
<!--&lt;!&ndash;      div.innerText=text;&ndash;&gt;-->
<!--&lt;!&ndash;      chat.appendChild(div);&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->

<!--&lt;!&ndash;    function addBotMessage(text){&ndash;&gt;-->
<!--&lt;!&ndash;      const div=document.createElement("div");&ndash;&gt;-->
<!--&lt;!&ndash;      div.className="msg ai";&ndash;&gt;-->
<!--&lt;!&ndash;      div.innerText=text;&ndash;&gt;-->
<!--&lt;!&ndash;      chat.appendChild(div);&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->

<!--&lt;!&ndash;    /* ================= SPINNER ================= */&ndash;&gt;-->
<!--&lt;!&ndash;    function showSpinner(show){&ndash;&gt;-->
<!--&lt;!&ndash;      loader.style.display = show ? "block" : "none";&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->

<!--&lt;!&ndash;    /* ================= SUMMARIZE ================= */&ndash;&gt;-->
<!--&lt;!&ndash;    async function summarize(){&ndash;&gt;-->
<!--&lt;!&ndash;      const file = pdfInput.files[0];&ndash;&gt;-->
<!--&lt;!&ndash;      if(!file){&ndash;&gt;-->
<!--&lt;!&ndash;        alert("Upload a PDF first");&ndash;&gt;-->
<!--&lt;!&ndash;        return;&ndash;&gt;-->
<!--&lt;!&ndash;      }&ndash;&gt;-->

<!--&lt;!&ndash;      addUserMessage("Summarize this PDF");&ndash;&gt;-->
<!--&lt;!&ndash;      showSpinner(true);&ndash;&gt;-->

<!--&lt;!&ndash;      const fd=new FormData();&ndash;&gt;-->
<!--&lt;!&ndash;      fd.append("file",file);&ndash;&gt;-->

<!--&lt;!&ndash;      try{&ndash;&gt;-->
<!--&lt;!&ndash;        const res=await fetch("/ai/summarize",{&ndash;&gt;-->
<!--&lt;!&ndash;          method:"POST",&ndash;&gt;-->
<!--&lt;!&ndash;          body:fd&ndash;&gt;-->
<!--&lt;!&ndash;        });&ndash;&gt;-->

<!--&lt;!&ndash;       const data = await res.json();&ndash;&gt;-->
<!--&lt;!&ndash;addBotMessage(data.summary);&ndash;&gt;-->


<!--&lt;!&ndash;        const text =&ndash;&gt;-->
<!--&lt;!&ndash;          data?.candidates?.[0]?.content?.parts?.[0]?.text&ndash;&gt;-->
<!--&lt;!&ndash;          || "No summary generated";&ndash;&gt;-->

<!--&lt;!&ndash;        addBotMessage(text);&ndash;&gt;-->

<!--&lt;!&ndash;      }catch(e){&ndash;&gt;-->
<!--&lt;!&ndash;        addBotMessage("‚ùå Failed to summarize PDF");&ndash;&gt;-->
<!--&lt;!&ndash;      }&ndash;&gt;-->

<!--&lt;!&ndash;      showSpinner(false);&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->

<!--&lt;!&ndash;    /* ================= LOGOUT ================= */&ndash;&gt;-->
<!--&lt;!&ndash;    function logout(){&ndash;&gt;-->
<!--&lt;!&ndash;      fetch("/logout",{method:"POST"})&ndash;&gt;-->
<!--&lt;!&ndash;        .then(()=>location.href="/register.html");&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->
<!--&lt;!&ndash;</script>&ndash;&gt;-->


<!--&lt;!&ndash;</body>&ndash;&gt;-->
<!--&lt;!&ndash;</html>&ndash;&gt;-->
<!--&lt;!&ndash;<!DOCTYPE html>&ndash;&gt;-->
<!--&lt;!&ndash;<html lang="en">&ndash;&gt;-->
<!--&lt;!&ndash;<head>&ndash;&gt;-->
<!--&lt;!&ndash;    <meta charset="UTF-8">&ndash;&gt;-->
<!--&lt;!&ndash;    <title>AI PDF Summarizer | StudyHub</title>&ndash;&gt;-->

<!--&lt;!&ndash;    <style>&ndash;&gt;-->
<!--&lt;!&ndash;        :root{&ndash;&gt;-->
<!--&lt;!&ndash;          &#45;&#45;bg:#0b0b0b;&ndash;&gt;-->
<!--&lt;!&ndash;          &#45;&#45;card:#151515;&ndash;&gt;-->
<!--&lt;!&ndash;          &#45;&#45;border:#2a2a2a;&ndash;&gt;-->
<!--&lt;!&ndash;          &#45;&#45;text:#ffffff;&ndash;&gt;-->
<!--&lt;!&ndash;          &#45;&#45;muted:#b0b0b0;&ndash;&gt;-->
<!--&lt;!&ndash;        }&ndash;&gt;-->

<!--&lt;!&ndash;        *{box-sizing:border-box;font-family:Inter,system-ui,sans-serif}&ndash;&gt;-->

<!--&lt;!&ndash;        body{&ndash;&gt;-->
<!--&lt;!&ndash;          margin:0;&ndash;&gt;-->
<!--&lt;!&ndash;          background:var(&#45;&#45;bg);&ndash;&gt;-->
<!--&lt;!&ndash;          color:var(&#45;&#45;text);&ndash;&gt;-->
<!--&lt;!&ndash;          display:flex;&ndash;&gt;-->
<!--&lt;!&ndash;          justify-content:center;&ndash;&gt;-->
<!--&lt;!&ndash;          padding:40px 20px;&ndash;&gt;-->
<!--&lt;!&ndash;        }&ndash;&gt;-->

<!--&lt;!&ndash;        /* ===== CONTAINER ===== */&ndash;&gt;-->
<!--&lt;!&ndash;        .container{&ndash;&gt;-->
<!--&lt;!&ndash;          width:100%;&ndash;&gt;-->
<!--&lt;!&ndash;          max-width:880px;&ndash;&gt;-->
<!--&lt;!&ndash;        }&ndash;&gt;-->

<!--&lt;!&ndash;        /* ===== HEADER ===== */&ndash;&gt;-->
<!--&lt;!&ndash;        .header{&ndash;&gt;-->
<!--&lt;!&ndash;          display:flex;&ndash;&gt;-->
<!--&lt;!&ndash;          justify-content:space-between;&ndash;&gt;-->
<!--&lt;!&ndash;          align-items:center;&ndash;&gt;-->
<!--&lt;!&ndash;          margin-bottom:24px;&ndash;&gt;-->
<!--&lt;!&ndash;        }&ndash;&gt;-->

<!--&lt;!&ndash;        .header h1{&ndash;&gt;-->
<!--&lt;!&ndash;          font-size:26px;&ndash;&gt;-->
<!--&lt;!&ndash;          font-weight:700;&ndash;&gt;-->
<!--&lt;!&ndash;        }&ndash;&gt;-->

<!--&lt;!&ndash;        .logout{&ndash;&gt;-->
<!--&lt;!&ndash;          background:none;&ndash;&gt;-->
<!--&lt;!&ndash;          color:#fff;&ndash;&gt;-->
<!--&lt;!&ndash;          border:1px solid var(&#45;&#45;border);&ndash;&gt;-->
<!--&lt;!&ndash;          padding:8px 14px;&ndash;&gt;-->
<!--&lt;!&ndash;          border-radius:10px;&ndash;&gt;-->
<!--&lt;!&ndash;          cursor:pointer;&ndash;&gt;-->
<!--&lt;!&ndash;        }&ndash;&gt;-->

<!--&lt;!&ndash;        .logout:hover{&ndash;&gt;-->
<!--&lt;!&ndash;          background:#fff;&ndash;&gt;-->
<!--&lt;!&ndash;          color:#000;&ndash;&gt;-->
<!--&lt;!&ndash;        }&ndash;&gt;-->

<!--&lt;!&ndash;        /* ===== CARD ===== */&ndash;&gt;-->
<!--&lt;!&ndash;        .card{&ndash;&gt;-->
<!--&lt;!&ndash;          background:var(&#45;&#45;card);&ndash;&gt;-->
<!--&lt;!&ndash;          border:1px solid var(&#45;&#45;border);&ndash;&gt;-->
<!--&lt;!&ndash;          border-radius:18px;&ndash;&gt;-->
<!--&lt;!&ndash;          padding:26px;&ndash;&gt;-->
<!--&lt;!&ndash;          box-shadow:0 30px 60px rgba(0,0,0,.7);&ndash;&gt;-->
<!--&lt;!&ndash;        }&ndash;&gt;-->

<!--&lt;!&ndash;&lt;!&ndash;        /* ===== UPLOAD ===== */&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;        .upload-box{&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;          border:2px dashed #333;&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;          border-radius:16px;&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;          padding:16px;&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;          text-align:center;&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;          cursor:pointer;&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;          transition:.3s;&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;        }&ndash;&gt;&ndash;&gt;-->

<!--&lt;!&ndash;&lt;!&ndash;        .upload-box:hover{&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;          border-color:#fff;&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;        }&ndash;&gt;&ndash;&gt;-->

<!--&lt;!&ndash;&lt;!&ndash;        .upload-box input{display:none}&ndash;&gt;&ndash;&gt;-->

<!--&lt;!&ndash;&lt;!&ndash;        .upload-box h3{&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;          margin:0 0 3px;&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;        }&ndash;&gt;&ndash;&gt;-->

<!--&lt;!&ndash;&lt;!&ndash;        .upload-box p{&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;          color:var(&#45;&#45;muted);&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;          margin:0;&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;        }&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;.upload-box{&ndash;&gt;-->
<!--&lt;!&ndash;  border:0.5px dashed #3a3a3a;&ndash;&gt;-->
<!--&lt;!&ndash;  border-radius:14px;&ndash;&gt;-->
<!--&lt;!&ndash;  padding:5px;&ndash;&gt;-->
<!--&lt;!&ndash;  text-align:center;&ndash;&gt;-->
<!--&lt;!&ndash;  cursor:pointer;&ndash;&gt;-->
<!--&lt;!&ndash;  transition:.25s;&ndash;&gt;-->
<!--&lt;!&ndash;  max-width:30px;&ndash;&gt;-->
<!--&lt;!&ndash;  margin:0 auto 6px;&ndash;&gt;-->
<!--&lt;!&ndash;}&ndash;&gt;-->

<!--&lt;!&ndash;.upload-box:hover{&ndash;&gt;-->
<!--&lt;!&ndash;  border-color:#ffffff;&ndash;&gt;-->
<!--&lt;!&ndash;}&ndash;&gt;-->

<!--&lt;!&ndash;.upload-box h3{&ndash;&gt;-->
<!--&lt;!&ndash;  margin:0;&ndash;&gt;-->
<!--&lt;!&ndash;  font-size:16px;&ndash;&gt;-->
<!--&lt;!&ndash;  font-weight:600;&ndash;&gt;-->
<!--&lt;!&ndash;}&ndash;&gt;-->

<!--&lt;!&ndash;.upload-box p{&ndash;&gt;-->
<!--&lt;!&ndash;  margin-top:6px;&ndash;&gt;-->
<!--&lt;!&ndash;  font-size:13px;&ndash;&gt;-->
<!--&lt;!&ndash;  color:#b0b0b0;&ndash;&gt;-->
<!--&lt;!&ndash;}&ndash;&gt;-->

<!--&lt;!&ndash;        /* ===== FILE CHIP ===== */&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;        .file-chip{&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;          margin-top:16px;&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;          background:#fff;&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;          color:#000;&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;          border-radius:14px;&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;          padding:12px 16px;&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;          display:flex;&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;          justify-content:space-between;&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;          align-items:center;&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;          animation:fadeUp .3s ease;&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;        }&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;.file-chip{&ndash;&gt;-->
<!--&lt;!&ndash;  margin:14px auto 0;&ndash;&gt;-->
<!--&lt;!&ndash;  background:#ffffff;&ndash;&gt;-->
<!--&lt;!&ndash;  color:#000;&ndash;&gt;-->
<!--&lt;!&ndash;  border-radius:12px;&ndash;&gt;-->
<!--&lt;!&ndash;  padding:10px 14px;&ndash;&gt;-->
<!--&lt;!&ndash;  display:flex;&ndash;&gt;-->
<!--&lt;!&ndash;  justify-content:space-between;&ndash;&gt;-->
<!--&lt;!&ndash;  align-items:center;&ndash;&gt;-->
<!--&lt;!&ndash;  max-width:520px;&ndash;&gt;-->
<!--&lt;!&ndash;  animation:fadeUp .3s ease;&ndash;&gt;-->
<!--&lt;!&ndash;}&ndash;&gt;-->

<!--&lt;!&ndash;        .file-chip span{&ndash;&gt;-->
<!--&lt;!&ndash;          font-size:14px;&ndash;&gt;-->
<!--&lt;!&ndash;        }&ndash;&gt;-->

<!--&lt;!&ndash;        .file-chip button{&ndash;&gt;-->
<!--&lt;!&ndash;          background:none;&ndash;&gt;-->
<!--&lt;!&ndash;          border:none;&ndash;&gt;-->
<!--&lt;!&ndash;          font-size:18px;&ndash;&gt;-->
<!--&lt;!&ndash;          cursor:pointer;&ndash;&gt;-->
<!--&lt;!&ndash;        }&ndash;&gt;-->

<!--&lt;!&ndash;        /* ===== ACTION ===== */&ndash;&gt;-->
<!--&lt;!&ndash;        .action{&ndash;&gt;-->
<!--&lt;!&ndash;          margin-top:22px;&ndash;&gt;-->
<!--&lt;!&ndash;          text-align:center;&ndash;&gt;-->
<!--&lt;!&ndash;        }&ndash;&gt;-->

<!--&lt;!&ndash;        .action button{&ndash;&gt;-->
<!--&lt;!&ndash;          background:#fff;&ndash;&gt;-->
<!--&lt;!&ndash;          color:#000;&ndash;&gt;-->
<!--&lt;!&ndash;          border:none;&ndash;&gt;-->
<!--&lt;!&ndash;          padding:14px 26px;&ndash;&gt;-->
<!--&lt;!&ndash;          border-radius:14px;&ndash;&gt;-->
<!--&lt;!&ndash;          font-size:15px;&ndash;&gt;-->
<!--&lt;!&ndash;          cursor:pointer;&ndash;&gt;-->
<!--&lt;!&ndash;        }&ndash;&gt;-->

<!--&lt;!&ndash;        .action button:hover{&ndash;&gt;-->
<!--&lt;!&ndash;          transform:translateY(-1px);&ndash;&gt;-->
<!--&lt;!&ndash;        }&ndash;&gt;-->

<!--&lt;!&ndash;        /* ===== CHAT ===== */&ndash;&gt;-->
<!--&lt;!&ndash;        .chat{&ndash;&gt;-->
<!--&lt;!&ndash;          margin-top:26px;&ndash;&gt;-->
<!--&lt;!&ndash;        }&ndash;&gt;-->

<!--&lt;!&ndash;        .msg{&ndash;&gt;-->
<!--&lt;!&ndash;          background:#1e1e1e;&ndash;&gt;-->
<!--&lt;!&ndash;          border:1px solid var(&#45;&#45;border);&ndash;&gt;-->
<!--&lt;!&ndash;          border-radius:18px;&ndash;&gt;-->
<!--&lt;!&ndash;          padding:18px 22px;&ndash;&gt;-->
<!--&lt;!&ndash;          line-height:1.7;&ndash;&gt;-->
<!--&lt;!&ndash;          animation:fadeUp .35s ease;&ndash;&gt;-->
<!--&lt;!&ndash;          white-space:pre-wrap;&ndash;&gt;-->
<!--&lt;!&ndash;        }&ndash;&gt;-->

<!--&lt;!&ndash;        /* ===== LOADER ===== */&ndash;&gt;-->
<!--&lt;!&ndash;        .loader{&ndash;&gt;-->
<!--&lt;!&ndash;          width:34px;&ndash;&gt;-->
<!--&lt;!&ndash;          height:34px;&ndash;&gt;-->
<!--&lt;!&ndash;          border:4px solid #333;&ndash;&gt;-->
<!--&lt;!&ndash;          border-top:4px solid #fff;&ndash;&gt;-->
<!--&lt;!&ndash;          border-radius:50%;&ndash;&gt;-->
<!--&lt;!&ndash;          animation:spin 1s linear infinite;&ndash;&gt;-->
<!--&lt;!&ndash;          margin:30px auto;&ndash;&gt;-->
<!--&lt;!&ndash;          display:none;&ndash;&gt;-->
<!--&lt;!&ndash;        }&ndash;&gt;-->

<!--&lt;!&ndash;        /* ===== ANIMATIONS ===== */&ndash;&gt;-->
<!--&lt;!&ndash;        @keyframes spin{&ndash;&gt;-->
<!--&lt;!&ndash;          to{transform:rotate(360deg)}&ndash;&gt;-->
<!--&lt;!&ndash;        }&ndash;&gt;-->
<!--&lt;!&ndash;        @keyframes fadeUp{&ndash;&gt;-->
<!--&lt;!&ndash;          from{opacity:0;transform:translateY(10px)}&ndash;&gt;-->
<!--&lt;!&ndash;          to{opacity:1;transform:translateY(0)}&ndash;&gt;-->
<!--&lt;!&ndash;        }&ndash;&gt;-->
<!--&lt;!&ndash;    </style>&ndash;&gt;-->
<!--&lt;!&ndash;</head>&ndash;&gt;-->

<!--&lt;!&ndash;<body>&ndash;&gt;-->

<!--&lt;!&ndash;<div class="container">&ndash;&gt;-->

<!--&lt;!&ndash;    <div class="header">&ndash;&gt;-->
<!--&lt;!&ndash;        <h1>ü§ñ AI PDF Summarizer</h1>&ndash;&gt;-->
<!--&lt;!&ndash;        <button class="logout" onclick="logout()">Logout</button>&ndash;&gt;-->
<!--&lt;!&ndash;    </div>&ndash;&gt;-->

<!--&lt;!&ndash;    <div class="card">&ndash;&gt;-->

<!--&lt;!&ndash;        &lt;!&ndash; Upload &ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;        <label class="upload-box">&ndash;&gt;-->
<!--&lt;!&ndash;            <input type="file" id="pdf" accept="application/pdf" onchange="showFile()">&ndash;&gt;-->
<!--&lt;!&ndash;            <h3>Upload PDF</h3>&ndash;&gt;-->
<!--&lt;!&ndash;            <p>Click or drop your file here</p>&ndash;&gt;-->
<!--&lt;!&ndash;        </label>&ndash;&gt;-->

<!--&lt;!&ndash;        &lt;!&ndash; Selected file &ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;        <div id="filePreview"></div>&ndash;&gt;-->

<!--&lt;!&ndash;        &lt;!&ndash; Action &ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;        <div class="action">&ndash;&gt;-->
<!--&lt;!&ndash;            <button onclick="summarize()">Summarize PDF</button>&ndash;&gt;-->
<!--&lt;!&ndash;        </div>&ndash;&gt;-->

<!--&lt;!&ndash;        &lt;!&ndash; Loader &ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;        <div class="loader" id="loader"></div>&ndash;&gt;-->

<!--&lt;!&ndash;        &lt;!&ndash; Output &ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;        <div class="chat" id="chat"></div>&ndash;&gt;-->

<!--&lt;!&ndash;    </div>&ndash;&gt;-->
<!--&lt;!&ndash;</div>&ndash;&gt;-->

<!--&lt;!&ndash;<script>&ndash;&gt;-->
<!--&lt;!&ndash;    /* ===== AUTH CHECK ===== */&ndash;&gt;-->
<!--&lt;!&ndash;    fetch("/auth/status")&ndash;&gt;-->
<!--&lt;!&ndash;      .then(r=>r.json())&ndash;&gt;-->
<!--&lt;!&ndash;      .then(d=>{&ndash;&gt;-->
<!--&lt;!&ndash;        if(!d.role || d.role==="NOT_LOGGED_IN"){&ndash;&gt;-->
<!--&lt;!&ndash;          alert("Login required");&ndash;&gt;-->
<!--&lt;!&ndash;          location.href="/register.html";&ndash;&gt;-->
<!--&lt;!&ndash;        }&ndash;&gt;-->
<!--&lt;!&ndash;      });&ndash;&gt;-->

<!--&lt;!&ndash;    /* ===== FILE UI ===== */&ndash;&gt;-->
<!--&lt;!&ndash;    function showFile(){&ndash;&gt;-->
<!--&lt;!&ndash;      const file = document.getElementById("pdf").files[0];&ndash;&gt;-->
<!--&lt;!&ndash;      const box = document.getElementById("filePreview");&ndash;&gt;-->
<!--&lt;!&ndash;      if(!file){ box.innerHTML=""; return; }&ndash;&gt;-->

<!--&lt;!&ndash;      box.innerHTML = `&ndash;&gt;-->
<!--&lt;!&ndash;        <div class="file-chip">&ndash;&gt;-->
<!--&lt;!&ndash;          <span>${file.name}</span>&ndash;&gt;-->
<!--&lt;!&ndash;          <button onclick="removeFile()">√ó</button>&ndash;&gt;-->
<!--&lt;!&ndash;        </div>&ndash;&gt;-->
<!--&lt;!&ndash;      `;&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->

<!--&lt;!&ndash;    function removeFile(){&ndash;&gt;-->
<!--&lt;!&ndash;      document.getElementById("pdf").value="";&ndash;&gt;-->
<!--&lt;!&ndash;      document.getElementById("filePreview").innerHTML="";&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->

<!--&lt;!&ndash;    /* ===== SUMMARIZE ===== */&ndash;&gt;-->
<!--&lt;!&ndash;    async function summarize(){&ndash;&gt;-->
<!--&lt;!&ndash;      const file = document.getElementById("pdf").files[0];&ndash;&gt;-->
<!--&lt;!&ndash;      if(!file){&ndash;&gt;-->
<!--&lt;!&ndash;        alert("Upload a PDF first");&ndash;&gt;-->
<!--&lt;!&ndash;        return;&ndash;&gt;-->
<!--&lt;!&ndash;      }&ndash;&gt;-->

<!--&lt;!&ndash;      document.getElementById("loader").style.display="block";&ndash;&gt;-->
<!--&lt;!&ndash;      document.getElementById("chat").innerHTML="";&ndash;&gt;-->

<!--&lt;!&ndash;      const fd = new FormData();&ndash;&gt;-->
<!--&lt;!&ndash;      fd.append("file", file);&ndash;&gt;-->

<!--&lt;!&ndash;      try{&ndash;&gt;-->
<!--&lt;!&ndash;        const res = await fetch("/ai/summarize",{method:"POST",body:fd});&ndash;&gt;-->
<!--&lt;!&ndash;        const data = await res.json();&ndash;&gt;-->

<!--&lt;!&ndash;        document.getElementById("chat").innerHTML =&ndash;&gt;-->
<!--&lt;!&ndash;          `<div class="msg">${data.summary || "No summary returned"}</div>`;&ndash;&gt;-->
<!--&lt;!&ndash;      }catch{&ndash;&gt;-->
<!--&lt;!&ndash;        document.getElementById("chat").innerHTML =&ndash;&gt;-->
<!--&lt;!&ndash;          `<div class="msg">‚ùå Failed to summarize PDF</div>`;&ndash;&gt;-->
<!--&lt;!&ndash;      }&ndash;&gt;-->

<!--&lt;!&ndash;      document.getElementById("loader").style.display="none";&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->

<!--&lt;!&ndash;    /* ===== LOGOUT ===== */&ndash;&gt;-->
<!--&lt;!&ndash;    function logout(){&ndash;&gt;-->
<!--&lt;!&ndash;      fetch("/logout",{method:"POST"})&ndash;&gt;-->
<!--&lt;!&ndash;        .then(()=>location.href="/register.html");&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->
<!--&lt;!&ndash;</script>&ndash;&gt;-->

<!--&lt;!&ndash;</body>&ndash;&gt;-->
<!--&lt;!&ndash;</html>&ndash;&gt;-->
<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <title>AI PDF Summarizer | StudyHub</title>-->

<!--    <style>-->
<!--        :root{-->
<!--          &#45;&#45;bg:#0b0b0b;-->
<!--          &#45;&#45;card:#151515;-->
<!--          &#45;&#45;border:#2a2a2a;-->
<!--          &#45;&#45;text:#ffffff;-->
<!--          &#45;&#45;muted:#b0b0b0;-->
<!--        }-->

<!--        *{box-sizing:border-box;font-family:Inter,system-ui,sans-serif}-->

<!--        body{-->
<!--          margin:0;-->
<!--          background:var(&#45;&#45;bg);-->
<!--          color:var(&#45;&#45;text);-->
<!--          display:flex;-->
<!--          justify-content:center;-->
<!--          padding:40px 20px;-->
<!--        }-->

<!--        /* ===== CONTAINER ===== */-->
<!--        .container{-->
<!--          width:100%;-->
<!--          max-width:880px;-->
<!--        }-->

<!--        /* ===== HEADER ===== */-->
<!--        .header{-->
<!--          display:flex;-->
<!--          justify-content:space-between;-->
<!--          align-items:center;-->
<!--          margin-bottom:24px;-->
<!--        }-->

<!--        .header h1{-->
<!--          font-size:26px;-->
<!--          font-weight:700;-->
<!--        }-->

<!--        .logout{-->
<!--          background:none;-->
<!--          color:#fff;-->
<!--          border:1px solid var(&#45;&#45;border);-->
<!--          padding:8px 14px;-->
<!--          border-radius:10px;-->
<!--          cursor:pointer;-->
<!--        }-->

<!--        .logout:hover{-->
<!--          background:#fff;-->
<!--          color:#000;-->
<!--        }-->

<!--        /* ===== CARD ===== */-->
<!--        .card{-->
<!--          background:var(&#45;&#45;card);-->
<!--          border:1px solid var(&#45;&#45;border);-->
<!--          border-radius:18px;-->
<!--          padding:26px;-->
<!--          box-shadow:0 30px 60px rgba(0,0,0,.7);-->
<!--        }-->

<!--&lt;!&ndash;        /* ===== UPLOAD ===== */&ndash;&gt;-->
<!--&lt;!&ndash;        .upload-box{&ndash;&gt;-->
<!--&lt;!&ndash;          border:2px dashed #333;&ndash;&gt;-->
<!--&lt;!&ndash;          border-radius:16px;&ndash;&gt;-->
<!--&lt;!&ndash;          padding:16px;&ndash;&gt;-->
<!--&lt;!&ndash;          text-align:center;&ndash;&gt;-->
<!--&lt;!&ndash;          cursor:pointer;&ndash;&gt;-->
<!--&lt;!&ndash;          transition:.3s;&ndash;&gt;-->
<!--&lt;!&ndash;        }&ndash;&gt;-->

<!--&lt;!&ndash;        .upload-box:hover{&ndash;&gt;-->
<!--&lt;!&ndash;          border-color:#fff;&ndash;&gt;-->
<!--&lt;!&ndash;        }&ndash;&gt;-->

<!--&lt;!&ndash;        .upload-box input{display:none}&ndash;&gt;-->

<!--&lt;!&ndash;        .upload-box h3{&ndash;&gt;-->
<!--&lt;!&ndash;          margin:0 0 3px;&ndash;&gt;-->
<!--&lt;!&ndash;        }&ndash;&gt;-->

<!--&lt;!&ndash;        .upload-box p{&ndash;&gt;-->
<!--&lt;!&ndash;          color:var(&#45;&#45;muted);&ndash;&gt;-->
<!--&lt;!&ndash;          margin:0;&ndash;&gt;-->
<!--&lt;!&ndash;        }&ndash;&gt;-->
<!--.upload-box{-->
<!--display:flex;-->
<!--flex-direction:coloumn;-->
<!--align-items: center;-->
<!--justify-content: center;-->
<!--padding: 30px 10px;-->
<!--  border:2px dashed #3a3a3a;-->
<!--  border-radius:14px;-->

<!--  text-align:center;-->
<!--  cursor:pointer;-->
<!--  transition:.25s;-->


<!--}-->

<!--.upload-box:hover{-->
<!--  border-color:#ffffff;-->
<!--}-->

<!--.upload-box h3{-->
<!--  margin-top:10px;-->
<!--  font-size:16px;-->
<!--  font-weight:600;-->
<!--}-->

<!--.upload-box p{-->
<!--  margin-top:10px;-->
<!--  margin-bottom:0px-->
<!--  font-size:10px;-->
<!--  color:#b0b0b0;-->
<!--  cursor:pointer;-->
<!--  transition:.25s;-->
<!--}-->
<!--.upload-box p:hover{-->
<!--color:#ffffff;-->
<!--}-->
<!--        /* ===== FILE CHIP ===== */-->
<!--&lt;!&ndash;        .file-chip{&ndash;&gt;-->
<!--&lt;!&ndash;          margin-top:16px;&ndash;&gt;-->
<!--&lt;!&ndash;          background:#fff;&ndash;&gt;-->
<!--&lt;!&ndash;          color:#000;&ndash;&gt;-->
<!--&lt;!&ndash;          border-radius:14px;&ndash;&gt;-->
<!--&lt;!&ndash;          padding:12px 16px;&ndash;&gt;-->
<!--&lt;!&ndash;          display:flex;&ndash;&gt;-->
<!--&lt;!&ndash;          justify-content:space-between;&ndash;&gt;-->
<!--&lt;!&ndash;          align-items:center;&ndash;&gt;-->
<!--&lt;!&ndash;          animation:fadeUp .3s ease;&ndash;&gt;-->
<!--&lt;!&ndash;        }&ndash;&gt;-->
<!--.file-chip{-->
<!--  margin:14px auto 0;-->
<!--  background:#ffffff;-->
<!--  color:#000;-->
<!--  border-radius:12px;-->
<!--  padding:10px 14px;-->
<!--  display:flex;-->
<!--  justify-content:space-between;-->
<!--  align-items:center;-->
<!--  max-width:520px;-->
<!--  animation:fadeUp .3s ease;-->
<!--}-->

<!--        .file-chip span{-->
<!--          font-size:14px;-->
<!--        }-->

<!--        .file-chip button{-->
<!--          background:none;-->
<!--          border:none;-->
<!--          font-size:18px;-->
<!--          cursor:pointer;-->
<!--        }-->

<!--        /* ===== ACTION ===== */-->
<!--        .action{-->
<!--          margin-top:22px;-->
<!--          text-align:center;-->
<!--        }-->

<!--        .action button{-->
<!--          background:#fff;-->
<!--          color:#000;-->
<!--          border:none;-->
<!--          padding:14px 26px;-->
<!--          border-radius:14px;-->
<!--          font-size:15px;-->
<!--          cursor:pointer;-->
<!--        }-->

<!--        .action button:hover{-->
<!--          transform:translateY(-1px);-->
<!--        }-->

<!--        /* ===== CHAT ===== */-->
<!--        .chat{-->
<!--          margin-top:26px;-->
<!--        }-->

<!--        .msg{-->
<!--          background:#1e1e1e;-->
<!--          border:1px solid var(&#45;&#45;border);-->
<!--          border-radius:18px;-->
<!--          padding:18px 22px;-->
<!--          line-height:1.7;-->
<!--          animation:fadeUp .35s ease;-->
<!--          white-space:pre-wrap;-->
<!--        }-->

<!--        /* ===== LOADER ===== */-->
<!--        .loader{-->
<!--          width:34px;-->
<!--          height:34px;-->
<!--          border:4px solid #333;-->
<!--          border-top:4px solid #fff;-->
<!--          border-radius:50%;-->
<!--          animation:spin 1s linear infinite;-->
<!--          margin:30px auto;-->
<!--          display:none;-->
<!--        }-->

<!--        /* ===== ANIMATIONS ===== */-->
<!--        @keyframes spin{-->
<!--          to{transform:rotate(360deg)}-->
<!--        }-->
<!--        @keyframes fadeUp{-->
<!--          from{opacity:0;transform:translateY(10px)}-->
<!--          to{opacity:1;transform:translateY(0)}-->
<!--        }-->
<!--    </style>-->
<!--</head>-->

<!--<body>-->

<!--<div class="container">-->

<!--    <div class="header">-->
<!--        <h1>ü§ñ AI PDF Summarizer</h1>-->
<!--        <button class="logout" onclick="logout()">Logout</button>-->
<!--    </div>-->

<!--    <div class="card">-->

<!--        &lt;!&ndash; Upload &ndash;&gt;-->
<!--        <label class="upload-box">-->
<!--            <input type="file" id="pdf" accept="application/pdf" onchange="showFile()">-->
<!--            <h3>Upload PDF</h3>-->
<!--            <p>&ndash;&gt;Click or drop your file here</p>-->
<!--        </label>-->

<!--        &lt;!&ndash; Selected file &ndash;&gt;-->
<!--        <div id="filePreview"></div>-->

<!--        &lt;!&ndash; Action &ndash;&gt;-->
<!--        <div class="action">-->
<!--            <button onclick="summarize()">Summarize PDF</button>-->
<!--        </div>-->

<!--        &lt;!&ndash; Loader &ndash;&gt;-->
<!--        <div class="loader" id="loader"></div>-->

<!--        &lt;!&ndash; Output &ndash;&gt;-->
<!--        <div class="chat" id="chat"></div>-->

<!--    </div>-->
<!--</div>-->

<!--<script>-->
<!--    /* ===== AUTH CHECK ===== */-->
<!--    fetch("/auth/status")-->
<!--      .then(r=>r.json())-->
<!--      .then(d=>{-->
<!--        if(!d.role || d.role==="NOT_LOGGED_IN"){-->
<!--          alert("Login required");-->
<!--          location.href="/register.html";-->
<!--        }-->
<!--      });-->

<!--    /* ===== FILE UI ===== */-->
<!--    function showFile(){-->
<!--      const file = document.getElementById("pdf").files[0];-->
<!--      const box = document.getElementById("filePreview");-->
<!--      if(!file){ box.innerHTML=""; return; }-->

<!--      box.innerHTML = `-->
<!--        <div class="file-chip">-->
<!--          <span>${file.name}</span>-->
<!--          <button onclick="removeFile()">√ó</button>-->
<!--        </div>-->
<!--      `;-->
<!--    }-->

<!--    function removeFile(){-->
<!--      document.getElementById("pdf").value="";-->
<!--      document.getElementById("filePreview").innerHTML="";-->
<!--    }-->

<!--    /* ===== SUMMARIZE ===== */-->
<!--    async function summarize(){-->
<!--      const file = document.getElementById("pdf").files[0];-->
<!--      if(!file){-->
<!--        alert("Upload a PDF first");-->
<!--        return;-->
<!--      }-->

<!--      document.getElementById("loader").style.display="block";-->
<!--      document.getElementById("chat").innerHTML="";-->

<!--      const fd = new FormData();-->
<!--      fd.append("file", file);-->

<!--      try{-->
<!--        const res = await fetch("/ai/summarize",{method:"POST",body:fd});-->
<!--        const data = await res.json();-->

<!--        document.getElementById("chat").innerHTML =-->
<!--          `<div class="msg">${data.summary || "No summary returned"}</div>`;-->
<!--      }catch{-->
<!--        document.getElementById("chat").innerHTML =-->
<!--          `<div class="msg">‚ùå Failed to summarize PDF</div>`;-->
<!--      }-->

<!--      document.getElementById("loader").style.display="none";-->
<!--    }-->

<!--   <script> /* ================= LOGOUT ================= */-->
<!--    function logout() {-->

<!--          alert("üëã Logged out");-->
<!--          location.href = "/register.html";-->

<!--    }</script>-->
<!--</script>-->

<!--</body>-->
<!--</html>-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>AI PDF Summarizer | StudyHub</title>

    <style>
        :root{
          --bg:#0b0b0b;
          --card:#151515;
          --border:#2a2a2a;
          --text:#ffffff;
          --muted:#b0b0b0;
        }

        *{
          box-sizing:border-box;
          font-family:Inter,system-ui,sans-serif;
        }

        body{
          margin:0;
          background:var(--bg);
          color:var(--text);
          display:flex;
          justify-content:center;
          padding:40px 20px;
        }

        /* ===== CONTAINER ===== */
        .container{
          width:100%;
          max-width:880px;
        }

        /* ===== HEADER ===== */
        .header{
          display:flex;
          justify-content:space-between;
          align-items:center;
          margin-bottom:24px;
        }

        .header h1{
          font-size:26px;
          font-weight:700;
        }

        .logout{
          background:none;
          color:#fff;
          border:1px solid var(--border);
          padding:8px 14px;
          border-radius:10px;
          cursor:pointer;
        }

        .logout:hover{
          background:#fff;
          color:#000;
        }

        /* ===== CARD ===== */
        .card{
          background:var(--card);
          border:1px solid var(--border);
          border-radius:18px;
          padding:26px;
          box-shadow:0 30px 60px rgba(0,0,0,.7);
        }

        /* ===== UPLOAD ===== */
        .upload-box{
          display:flex;
          flex-direction:column;
          align-items:center;
          justify-content:center;
          padding:30px 10px;
          border:2px dashed #3a3a3a;
          border-radius:14px;
          text-align:center;
          cursor:pointer;
          transition:.25s;
        }

        .upload-box:hover{
          border-color:#ffffff;
        }

        .upload-box input{
          display:none;
        }

        .upload-box h3{
          margin-top:10px;
          font-size:16px;
          font-weight:600;
        }

        .upload-box p{
          margin-top:10px;
          margin-bottom:0;
          font-size:13px;
          color:var(--muted);
        }

        /* ===== FILE CHIP ===== */
        .file-chip{
          margin:14px auto 0;
          background:#ffffff;
          color:#000;
          border-radius:12px;
          padding:10px 14px;
          display:flex;
          justify-content:space-between;
          align-items:center;
          max-width:520px;
          animation:fadeUp .3s ease;
        }

        .file-chip span{
          font-size:14px;
        }

        .file-chip button{
          background:none;
          border:none;
          font-size:18px;
          cursor:pointer;
        }

        /* ===== ACTION ===== */
        .action{
          margin-top:22px;
          text-align:center;
        }

        .action button{
          background:#fff;
          color:#000;
          border:none;
          padding:14px 26px;
          border-radius:14px;
          font-size:15px;
          cursor:pointer;
        }

        .action button:hover{
          transform:translateY(-1px);
        }

        /* ===== CHAT ===== */
        .chat{
          margin-top:26px;
        }

        .msg{
          background:#1e1e1e;
          border:1px solid var(--border);
          border-radius:18px;
          padding:18px 22px;
          line-height:1.7;
          animation:fadeUp .35s ease;
          white-space:pre-wrap;
        }

        /* ===== LOADER ===== */
        .loader{
          width:34px;
          height:34px;
          border:4px solid #333;
          border-top:4px solid #fff;
          border-radius:50%;
          animation:spin 1s linear infinite;
          margin:30px auto;
          display:none;
        }

        /* ===== ANIMATIONS ===== */
        @keyframes spin{
          to{transform:rotate(360deg)}
        }

        @keyframes fadeUp{
          from{opacity:0;transform:translateY(10px)}
          to{opacity:1;transform:translateY(0)}
        }
    </style>
</head>

<body>

<div class="container">

    <div class="header">
        <h1>ü§ñ AI PDF Summarizer</h1>
        <button class="logout" onclick="logout()">Logout</button>
    </div>

    <div class="card">

        <!-- Upload -->
        <label class="upload-box">
            <input type="file" id="pdf" accept="application/pdf" onchange="showFile()">
            <h3>Upload PDF</h3>
            <p>Click or drop your file here</p>
        </label>

        <!-- Selected file -->
        <div id="filePreview"></div>

        <!-- Action -->
        <div class="action">
            <button onclick="summarize()">Summarize PDF</button>
        </div>

        <!-- Loader -->
        <div class="loader" id="loader"></div>

        <!-- Output -->
        <div class="chat" id="chat"></div>

    </div>
</div>

<script>
    /* ===== AUTH CHECK ===== */
    fetch("/auth/status")
      .then(r=>r.json())
      .then(d=>{
        if(!d.role || d.role==="NOT_LOGGED_IN"){
          alert("Login required");
          location.href="/register.html";
        }
      });

    /* ===== FILE UI ===== */
    function showFile(){
      const file = document.getElementById("pdf").files[0];
      const box = document.getElementById("filePreview");

      if(!file){
        box.innerHTML="";
        return;
      }

      box.innerHTML = `
        <div class="file-chip">
          <span>${file.name}</span>
          <button onclick="removeFile()">√ó</button>
        </div>
      `;
    }

    function removeFile(){
      document.getElementById("pdf").value="";
      document.getElementById("filePreview").innerHTML="";
    }

    /* ===== SUMMARIZE ===== */
    async function summarize(){
      const file = document.getElementById("pdf").files[0];
      if(!file){
        alert("Upload a PDF first");
        return;
      }

      document.getElementById("loader").style.display="block";
      document.getElementById("chat").innerHTML="";

      const fd = new FormData();
      fd.append("file", file);

      try{
        const res = await fetch("/ai/summarize",{
          method:"POST",
          body:fd
        });

        const data = await res.json();

        document.getElementById("chat").innerHTML =
          `<div class="msg">${data.summary || "No summary returned"}</div>`;
      }
      catch{
        document.getElementById("chat").innerHTML =
          `<div class="msg">‚ùå Failed to summarize PDF</div>`;
      }

      document.getElementById("loader").style.display="none";
    }

    /* ===== LOGOUT ===== */
    function logout(){
      alert("üëã Logged out");
      location.href="/register.html";
    }
</script>

</body>
</html>
