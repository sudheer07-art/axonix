<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <title>Uploaded PDFs</title>-->
<!--    <link rel="stylesheet" href="/css/style.css">-->
<!--</head>-->
<!--<body>-->

<!--<div class="navbar">-->
<!--    <h2>üìÇ Uploaded PDFs</h2>-->
<!--    <a href="/teacher.html">‚¨Ö Back to Teacher Panel</a>-->
<!--</div>-->

<!--<div class="container">-->
<!--    <div class="card">-->
<!--        <div id="fileList">Loading files...</div>-->
<!--    </div>-->

<!--    <form action="/logout" method="post">-->
<!--        <button class="btn danger">Logout</button>-->
<!--    </form>-->
<!--</div>-->

<!--<script>-->
<!--    document.addEventListener("DOMContentLoaded", loadFiles);-->

<!--    function loadFiles() {-->
<!--        fetch("/files/list")-->
<!--            .then(res => res.json())-->
<!--            .then(files => {-->
<!--                const list = document.getElementById("fileList");-->
<!--                list.innerHTML = "";-->

<!--                if (files.length === 0) {-->
<!--                    list.innerHTML = "<p>No PDFs uploaded.</p>";-->
<!--                    return;-->
<!--                }-->

<!--                files.forEach(file => {-->
<!--                    list.innerHTML += `-->
<!--                        <div class="file-card">-->
<!--                            <span>${file.fileName}</span>-->

<!--                            <a href="/files/download/${file.id}" class="btn">-->
<!--                                Download-->
<!--                            </a>-->

<!--                            <button class="btn danger"-->
<!--                                    onclick="deleteFile(${file.id})">-->
<!--                                Delete-->
<!--                            </button>-->
<!--                        </div>-->
<!--                    `;-->
<!--                });-->
<!--            });-->
<!--    }-->

<!--    function deleteFile(id) {-->
<!--        if (!confirm("Delete this PDF?")) return;-->

<!--        fetch("/files/delete/" + id, {-->
<!--            method: "DELETE"-->
<!--        })-->
<!--        .then(res => {-->
<!--            if (res.ok) {-->
<!--                loadFiles();-->
<!--            } else {-->
<!--                alert("Delete failed");-->
<!--            }-->
<!--        });-->
<!--    }-->
<!--</script>-->

<!--</body>-->
<!--</html>-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Uploaded PDFs | AXONIX</title>

    <style>
        body {
          margin: 0;
          font-family: Arial, sans-serif;
          background: #a89bff;
        }

        header {
          background: white;
          padding: 16px 40px;
          display: flex;
          justify-content: space-between;
          align-items: center;
        }

        .logo {
          font-size: 22px;
          font-weight: bold;
          color: #7b6cff;
        }

        .container {
          max-width: 1000px;
          margin: 40px auto;
        }

        .card {
          background: white;
          padding: 30px;
          border-radius: 16px;
        }

        .filters {
          display: grid;
          grid-template-columns: repeat(4, 1fr);
          gap: 12px;
          margin-bottom: 20px;
        }

        .filters select,
        .filters input {
          padding: 10px;
        }

        button {
          padding: 10px 18px;
          background: #7b6cff;
          color: white;
          border: none;
          border-radius: 8px;
          cursor: pointer;
        }

        button:hover {
          background: #6958f5;
        }

        table {
          width: 100%;
          border-collapse: collapse;
          margin-top: 20px;
        }

        th, td {
          padding: 12px;
          border-bottom: 1px solid #ddd;
          text-align: left;
        }

        th {
          background: #f4f1ff;
        }

        .actions button {
          margin-right: 8px;
        }

        .top-actions {
          display: flex;
          justify-content: space-between;
          margin-bottom: 20px;
        }
    </style>
</head>

<body>

<header>
    <div class="logo">üìÅ Uploaded PDFs</div>
    <a href="/universitypdf.html">‚Üê Back to Teacher Panel</a>
</header>

<div class="container">
    <div class="card">

        <div class="filters">
            <select id="university">
                <option value="JNTU">JNTU</option>
                <option value="OU">OU</option>
            </select>

            <select id="branch">
                <option value="CSE">CSE</option>
                <option value="ECE">ECE</option>
            </select>

            <select id="semester">
                <option value="SEM 1">SEM 1</option>
                <option value="SEM 2">SEM 2</option>
            </select>

            <input id="subject" placeholder="Subject">
        </div>

        <button onclick="loadFiles()">Search PDFs</button>

        <table>
            <thead>
            <tr>
                <th>Filename</th>
                <th>University</th>
                <th>Branch</th>
                <th>Semester</th>
                <th>Subject</th>
                <th>Actions</th>
            </tr>
            </thead>
            <tbody id="fileTable"></tbody>
        </table>

    </div>
</div>

<script>
    async function loadFiles() {
      const u = document.getElementById("university").value;
      const b = document.getElementById("branch").value;
      const s = document.getElementById("semester").value;
      const sub = document.getElementById("subject").value;

      const res = await fetch(
        `/files/list?university=${u}&branch=${b}&semester=${s}&subject=${sub}`
      );

      const data = await res.json();
      const table = document.getElementById("fileTable");
      table.innerHTML = "";

      if (data.length === 0) {
        table.innerHTML = "<tr><td colspan='6'>No PDFs found</td></tr>";
        return;
      }

      data.forEach(f => {
        table.innerHTML += `
          <tr>
            <td>${f.filename}</td>
            <td>${f.university}</td>
            <td>${f.branch}</td>
            <td>${f.semester}</td>
            <td>${f.subject}</td>
            <td class="actions">
              <a href="/files/download/${f.id}">
                <button>Download</button>
              </a>
              <button onclick="deleteFile(${f.id})">Delete</button>
            </td>
          </tr>
        `;
      });
    }

    async function deleteFile(id) {
      if (!confirm("Delete this PDF?")) return;

      const res = await fetch(`/files/delete/${id}`, { method: "DELETE" });
      if (res.ok) {
        alert("Deleted");
        loadFiles();
      } else {
        alert("Delete failed");
      }
    }
</script>

</body>
</html>
